/*! For license information please see components-src-PolicyAndCookieBanner-PolicyAndCookieBanner-stories.87fc0a7e.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkessex_toolkit_stories=self.webpackChunkessex_toolkit_stories||[]).push([[7346],{"../components/src/PolicyAndCookieBanner/PolicyAndCookieBanner.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AdditionalLinks:()=>AdditionalLinks,CookieChanges:()=>CookieChanges,CustomLinks:()=>CustomLinks,Simple:()=>Simple,Styling:()=>Styling,Theme:()=>Theme,default:()=>PolicyAndCookieBanner_stories});var jsx_runtime=__webpack_require__("../../.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/jsx-runtime.js"),lib_commonjs=__webpack_require__("../../.yarn/__virtual__/@fluentui-react-virtual-b70c8db417/0/cache/@fluentui-react-npm-8.107.5-3772b01210-b03b5fbb90.zip/node_modules/@fluentui/react/lib-commonjs/index.js"),react=__webpack_require__("../../.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js");function useLoadMSFTCookieScript({language,theme,onConsentChange,onError,maxScriptLoadingTimeMs=5e3,cookieScriptTagId="msft-cookie-script",cookieConsentBannerId="msft-cookie-consent-banner",cookieScriptSrc="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"}){const[consentManager,setConsentManager]=(0,react.useState)();return(0,react.useEffect)((()=>{!async function initialize(){try{if(void 0!==consentManager)return;isCookieScriptLoaded(cookieScriptTagId)||await async function addCookieScript({cookieScriptTagId,cookieScriptSrc,maxScriptLoadingTimeMs}){return new Promise(((resolve,reject)=>{const script=document.createElement("script");script.id=cookieScriptTagId,script.crossOrigin="anonymous",script.src=cookieScriptSrc,document.head.appendChild(script);let totalLoadingTime=0;function isLoaded(){isCookieScriptLoaded(cookieScriptTagId)?resolve():(totalLoadingTime>=maxScriptLoadingTimeMs&&reject(new Error(`Error loading ${cookieScriptSrc}. Failed to load script in ${maxScriptLoadingTimeMs} ms.`)),totalLoadingTime+=50,setTimeout(isLoaded,50))}isLoaded()}))}({maxScriptLoadingTimeMs,cookieScriptSrc,cookieScriptTagId}),function isCookieBannerPlaceholderElementPresent(cookieConsentBannerId){return!!document.getElementById(cookieConsentBannerId)}(cookieConsentBannerId)||function addCookieBannerPlaceholderElement(cookieConsentBannerId){const div=document.createElement("div");div.id=cookieConsentBannerId,document.body.prepend(div)}(cookieConsentBannerId);const cookieBannerPlaceholderElement=document.getElementById(cookieConsentBannerId);if(!cookieBannerPlaceholderElement)throw new Error(`Error loading cookie-banner placeholder element. Failed to find element with id ${cookieConsentBannerId} in the DOM.`);if(!window.WcpConsent)throw new Error("WcpConsent is undefined - did you include the script tag?");window.WcpConsent.init(language,cookieBannerPlaceholderElement,(function initializeConsentManager(err,consentManager){err?console.error(err):setConsentManager(consentManager)}),onConsentChange,theme)}catch(error){onError(error)}}()}),[cookieConsentBannerId,cookieScriptSrc,cookieScriptTagId,maxScriptLoadingTimeMs,language,theme,onConsentChange,consentManager,setConsentManager,onError]),consentManager}function isCookieScriptLoaded(cookieScriptTagId){return!!document.getElementById(cookieScriptTagId)&&void 0!==window.WcpConsent}const containerStyles={display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",padding:"10px"},defaultBannerLinks=[{name:"Privacy & Cookies",href:" https://go.microsoft.com/fwlink/?LinkId=521839"},{name:"Terms of Use",href:"https://go.microsoft.com/fwlink/?LinkID=760869"},{name:"Trademarks",href:"https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/EN-US.aspx"},{name:"Contact Us",href:"https://go.microsoft.com/?linkid=2028325"},{name:"Code of Conduct",href:"https://opensource.microsoft.com/codeofconduct/"},{name:`©️ ${(new Date).getFullYear()} Microsoft`,href:"https://www.microsoft.com/en-us/legal/intellectualproperty/copyright"}],PolicyAndCookieBanner=(0,react.memo)((function CookieConsentProvider({language=navigator.language??"en-US",theme="light",onConsentChange=()=>{},onError,className,styles,links=defaultBannerLinks}){const divStyles=(0,react.useMemo)((()=>({...containerStyles,...styles})),[styles]),policyLinks=(0,react.useMemo)((()=>links.map((({name,href},i)=>(0,jsx_runtime.jsx)(PolicyLink,{divider:0!==i,name,href},name)))),[links]),consentManager=useLoadMSFTCookieScript({language,theme,onConsentChange,onError});return(0,jsx_runtime.jsxs)("div",{className,style:divStyles,children:[consentManager?.isConsentRequired&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PolicyLink,{name:"Manage Cookies",id:"MSFTManageCookiesLink",onClick:()=>{consentManager?.manageConsent()}}),(0,jsx_runtime.jsx)(lib_commonjs.Text,{variant:"tiny",children:"|"})]}),policyLinks]})}));PolicyAndCookieBanner.displayName="PolicyAndCookieBanner";const PolicyLink=(0,react.memo)((function PolicyLink({name,href,onClick,divider=!1,id}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[divider&&(0,jsx_runtime.jsx)(lib_commonjs.Text,{variant:"tiny",children:"|"}),(0,jsx_runtime.jsx)(lib_commonjs.Text,{variant:"smallPlus",children:(0,jsx_runtime.jsx)(lib_commonjs.Link,{id,href,target:"_blank",onClick,children:name})})]})}));try{PolicyAndCookieBanner.displayName="PolicyAndCookieBanner",PolicyAndCookieBanner.__docgenInfo={description:"",displayName:"PolicyAndCookieBanner",props:{language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"string"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"CookieConsentBannerThemes"}},onConsentChange:{defaultValue:null,description:"",name:"onConsentChange",required:!1,type:{name:"(newConsent: CookieConsent) => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!0,type:{name:"(error: unknown) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"CSSProperties"}},links:{defaultValue:null,description:"",name:"links",required:!1,type:{name:"PolicyLinkDetails[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../components/src/PolicyAndCookieBanner/PolicyAndCookieBanner.tsx#PolicyAndCookieBanner"]={docgenInfo:PolicyAndCookieBanner.__docgenInfo,name:"PolicyAndCookieBanner",path:"../components/src/PolicyAndCookieBanner/PolicyAndCookieBanner.tsx#PolicyAndCookieBanner"})}catch(__react_docgen_typescript_loader_error){}const PolicyAndCookieBanner_stories={title:"@essex:components/PolicyAndCookieBanner",args:{onError:window.alert.bind(window)}},Simple={render:args=>(0,jsx_runtime.jsx)(PolicyAndCookieBanner,{...args}),name:"Simple use case"},Theme={render:args=>(0,jsx_runtime.jsx)(PolicyAndCookieBanner,{...args}),args:{theme:"dark"},name:"Theming cookie banner"},CookieChanges={render:args=>(0,jsx_runtime.jsx)(PolicyAndCookieBanner,{...args}),args:{onConsentChange:consents=>console.log(consents)},name:"Listen for cookie consent changes"},Styling={render:args=>(0,jsx_runtime.jsx)(PolicyAndCookieBanner,{...args}),args:{className:"some-class-perhaps-provided-by-StyledComponets",styles:{flexDirection:"column"}},name:"Styling"},CustomLinks={render:args=>(0,jsx_runtime.jsx)(PolicyAndCookieBanner,{...args}),args:{links:[{name:"Bing",href:"https://bing.com"}]},name:"Custom links (overrride)"},AdditionalLinks={render:args=>(0,jsx_runtime.jsx)(PolicyAndCookieBanner,{...args}),args:{links:[...defaultBannerLinks,{name:"Bing",href:"https://bing.com"}]},name:"Additional links"};Simple.parameters={...Simple.parameters,docs:{...Simple.parameters?.docs,source:{originalSource:"{\n  render: args => /*#__PURE__*/_jsx(PolicyAndCookieBanner, {\n    ...args\n  }),\n  name: 'Simple use case'\n}",...Simple.parameters?.docs?.source}}},Theme.parameters={...Theme.parameters,docs:{...Theme.parameters?.docs,source:{originalSource:"{\n  render: args => /*#__PURE__*/_jsx(PolicyAndCookieBanner, {\n    ...args\n  }),\n  args: {\n    theme: 'dark'\n  },\n  name: 'Theming cookie banner'\n}",...Theme.parameters?.docs?.source}}},CookieChanges.parameters={...CookieChanges.parameters,docs:{...CookieChanges.parameters?.docs,source:{originalSource:"{\n  render: args => /*#__PURE__*/_jsx(PolicyAndCookieBanner, {\n    ...args\n  }),\n  args: {\n    onConsentChange: consents => console.log(consents)\n  },\n  name: 'Listen for cookie consent changes'\n}",...CookieChanges.parameters?.docs?.source}}},Styling.parameters={...Styling.parameters,docs:{...Styling.parameters?.docs,source:{originalSource:"{\n  render: args => /*#__PURE__*/_jsx(PolicyAndCookieBanner, {\n    ...args\n  }),\n  args: {\n    className: 'some-class-perhaps-provided-by-StyledComponets',\n    styles: {\n      flexDirection: 'column'\n    }\n  },\n  name: 'Styling'\n}",...Styling.parameters?.docs?.source}}},CustomLinks.parameters={...CustomLinks.parameters,docs:{...CustomLinks.parameters?.docs,source:{originalSource:"{\n  render: args => /*#__PURE__*/_jsx(PolicyAndCookieBanner, {\n    ...args\n  }),\n  args: {\n    links: [{\n      name: 'Bing',\n      href: 'https://bing.com'\n    }]\n  },\n  name: 'Custom links (overrride)'\n}",...CustomLinks.parameters?.docs?.source}}},AdditionalLinks.parameters={...AdditionalLinks.parameters,docs:{...AdditionalLinks.parameters?.docs,source:{originalSource:"{\n  render: args => /*#__PURE__*/_jsx(PolicyAndCookieBanner, {\n    ...args\n  }),\n  args: {\n    links: [...defaultBannerLinks, {\n      name: 'Bing',\n      href: 'https://bing.com'\n    }]\n  },\n  name: 'Additional links'\n}",...AdditionalLinks.parameters?.docs?.source}}}}}]);