/*! For license information please see 9821.7c5a6a62.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkessex_toolkit_stories=self.webpackChunkessex_toolkit_stories||[]).push([[9821],{"../../.yarn/__virtual__/@thematic-core-virtual-c0cbcb6492/0/cache/@thematic-core-npm-4.0.4-09b6e8f09f-1c37c667a2.zip/node_modules/@thematic/core/dist/types/enums.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var ScaleType,SelectionState,ThemeVariant;__webpack_require__.d(__webpack_exports__,{fP:()=>SelectionState}),function(ScaleType){ScaleType.Linear="linear",ScaleType.Log="log",ScaleType.Quantile="quantile"}(ScaleType||(ScaleType={})),function(SelectionState){SelectionState.Normal="normal",SelectionState.Hovered="hovered",SelectionState.Selected="selected",SelectionState.Suppressed="suppressed",SelectionState.Hidden="hidden",SelectionState.NoData="nodata"}(SelectionState||(SelectionState={})),function(ThemeVariant){ThemeVariant.Light="light",ThemeVariant.Dark="dark"}(ThemeVariant||(ThemeVariant={}))},"../../.yarn/__virtual__/@thematic-d3-virtual-e9c97b7b59/0/cache/@thematic-d3-npm-2.0.19-b570d18cf9-98cd564fdc.zip/node_modules/@thematic/d3/dist/layers.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ZZ:()=>axis,jW:()=>plotArea,uy:()=>chart});var _svg_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../.yarn/__virtual__/@thematic-d3-virtual-e9c97b7b59/0/cache/@thematic-d3-npm-2.0.19-b570d18cf9-98cd564fdc.zip/node_modules/@thematic/d3/dist/svg.js");function getSelectionOptions(_selection,options){return{on:(null==options?void 0:options.on)||{},attr:(null==options?void 0:options.attr)||{},classed:(null==options?void 0:options.classed)||{},style:(null==options?void 0:options.style)||{}}}function attr(selection,attrs){let ret=selection;return Object.entries(attrs||{}).forEach((entry=>{const[key,value]=entry;ret=selection.attr(key,value)})),ret}function on(selection,ons){let ret=selection;return Object.entries(ons||{}).forEach((entry=>{const[key,value]=entry;ret=selection.on(key,value)})),ret}function classed(selection,classes){let ret=selection;return Object.entries(classes||{}).forEach((entry=>{const[key,value]=entry;ret=selection.classed(key,value)})),ret}function style(selection,styles){let ret=selection;return Object.entries(styles||{}).forEach((entry=>{const[key,value]=entry;ret=selection.style(key,value)})),ret}function applyBaseOptions(selection,options){return selection.call(on,null==options?void 0:options.on).call(attr,null==options?void 0:options.attr).call(classed,null==options?void 0:options.classed).call(style,null==options?void 0:options.style)}function chart(svg,theme,options){const opts=function getChartOptions(selection,options){const w=null==options?void 0:options.width,h=null==options?void 0:options.height,width=w||+selection.attr("width")||0,height=h||+selection.attr("height")||0,sOpts=getSelectionOptions(0,options);return{on:sOpts.on,attr:{width,height,...sOpts.attr},classed:sOpts.classed,style:sOpts.style}}(svg,options);return svg.classed("thematic-chart",!0).call(_svg_js__WEBPACK_IMPORTED_MODULE_0__.YP,theme.chart()).call(applyBaseOptions,opts)}function plotArea(group,theme,options){const p=theme.plotArea(),opts=function getPlotAreaOptions(selection,options){const marginTop=(null==options?void 0:options.marginTop)||0,marginBottom=(null==options?void 0:options.marginBottom)||0,marginLeft=(null==options?void 0:options.marginLeft)||0,marginRight=(null==options?void 0:options.marginRight)||0,w=null==options?void 0:options.width,h=null==options?void 0:options.height,parent=selection.select((function(){return this.parentNode})),pw=parent&&+parent.attr("width")||0,ph=parent&&+parent.attr("height")||0,width=w||pw-marginLeft-marginRight,height=h||ph-marginTop-marginBottom,sOpts=getSelectionOptions(0,options);return{width,height,marginTop,marginBottom,marginLeft,marginRight,on:sOpts.on,attr:{width,height,...sOpts.attr},classed:sOpts.classed,style:sOpts.style}}(group,options),{marginTop,marginLeft}=opts;return group.classed("thematic-plot-area",!0).attr("transform",`translate(${null!=marginLeft?marginLeft:0},${null!=marginTop?marginTop:0})`),group.select(".thematic-plot-area-background").remove(),group.insert("rect",":first-child").classed("thematic-plot-area-background",!0).call(_svg_js__WEBPACK_IMPORTED_MODULE_0__.JA,p).call(applyBaseOptions,opts),group}function axis(group,theme,axisGenerator,options){const opts=getSelectionOptions(0,options),ticks=theme.axisTicks();return axisGenerator.tickSizeInner(ticks.innerSize()),axisGenerator.tickSizeOuter(ticks.outerSize()),group.call(axisGenerator).call((g=>g.select(".domain").call(_svg_js__WEBPACK_IMPORTED_MODULE_0__.jv,theme.axisLine()))).call((g=>g.selectAll(".tick > line").call(_svg_js__WEBPACK_IMPORTED_MODULE_0__.jv,ticks))).call((g=>g.selectAll(".tick > text").call(_svg_js__WEBPACK_IMPORTED_MODULE_0__.fL,theme.axisTickLabels()))).call(applyBaseOptions,opts),group}},"../../.yarn/__virtual__/@thematic-d3-virtual-e9c97b7b59/0/cache/@thematic-d3-npm-2.0.19-b570d18cf9-98cd564fdc.zip/node_modules/@thematic/d3/dist/svg.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function svg(selection,child){return selection.attr("fill",child.backgroundColor().hex())}function mark(selection,child){return selection.attr("fill",(d=>child.fill(d).hex())).attr("fill-opacity",(d=>child.fillOpacity(d))).attr("stroke",(d=>child.stroke(d).hex())).attr("stroke-opacity",(d=>child.strokeOpacity(d))).attr("stroke-width",(d=>child.strokeWidth(d)))}function rect(selection,child){return selection.call(mark,child)}function line(selection,child){return selection.call(mark,child)}function text(selection,child){return selection.attr("font-size",child.fontSize()).attr("font-family",child.fontFamily()).call(mark,child)}__webpack_require__.d(__webpack_exports__,{JA:()=>rect,YP:()=>svg,fL:()=>text,jv:()=>line})},"../../.yarn/cache/d3-array-npm-3.2.2-f6016b3101-98af3db792.zip/node_modules/d3-array/src/bin.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>bin});var array=Array.prototype,slice=array.slice,bisect=(array.map,__webpack_require__("../../.yarn/cache/d3-array-npm-3.2.2-f6016b3101-98af3db792.zip/node_modules/d3-array/src/bisect.js"));function constant(x){return()=>x}function extent(values,valueof){let min,max;if(void 0===valueof)for(const value of values)null!=value&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)))}return[min,max]}function identity(x){return x}var ticks=__webpack_require__("../../.yarn/cache/d3-array-npm-3.2.2-f6016b3101-98af3db792.zip/node_modules/d3-array/src/ticks.js");function thresholdSturges(values){return Math.ceil(Math.log(function count(values,valueof){let count=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&++count;else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&++count}return count}(values))/Math.LN2)+1}function bin(){var value=identity,domain=extent,threshold=thresholdSturges;function histogram(data){Array.isArray(data)||(data=Array.from(data));var i,x,step,n=data.length,values=new Array(n);for(i=0;i<n;++i)values[i]=value(data[i],i,data);var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);if(!Array.isArray(tz)){const max=x1,tn=+tz;if(domain===extent&&([x0,x1]=function nice(start,stop,count){let prestep;for(;;){const step=(0,ticks.G9)(start,stop,count);if(step===prestep||0===step||!isFinite(step))return[start,stop];step>0?(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step):step<0&&(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step),prestep=step}}(x0,x1,tn)),(tz=(0,ticks.ZP)(x0,x1,tn))[0]<=x0&&(step=(0,ticks.G9)(x0,x1,tn)),tz[tz.length-1]>=x1)if(max>=x1&&domain===extent){const step=(0,ticks.G9)(x0,x1,tn);isFinite(step)&&(step>0?x1=(Math.floor(x1/step)+1)*step:step<0&&(x1=(Math.ceil(x1*-step)+1)/-step))}else tz.pop()}for(var m=tz.length,a=0,b=m;tz[a]<=x0;)++a;for(;tz[b-1]>x1;)--b;(a||b<m)&&(tz=tz.slice(a,b),m=b-a);var bin,bins=new Array(m+1);for(i=0;i<=m;++i)(bin=bins[i]=[]).x0=i>0?tz[i-1]:x0,bin.x1=i<m?tz[i]:x1;if(isFinite(step)){if(step>0)for(i=0;i<n;++i)null!=(x=values[i])&&x0<=x&&x<=x1&&bins[Math.min(m,Math.floor((x-x0)/step))].push(data[i]);else if(step<0)for(i=0;i<n;++i)if(null!=(x=values[i])&&x0<=x&&x<=x1){const j=Math.floor((x0-x)*step);bins[Math.min(m,j+(tz[j]<=x))].push(data[i])}}else for(i=0;i<n;++i)null!=(x=values[i])&&x0<=x&&x<=x1&&bins[(0,bisect.ZP)(tz,x,0,m)].push(data[i]);return bins}return histogram.value=function(_){return arguments.length?(value="function"==typeof _?_:constant(_),histogram):value},histogram.domain=function(_){return arguments.length?(domain="function"==typeof _?_:constant([_[0],_[1]]),histogram):domain},histogram.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:constant(Array.isArray(_)?slice.call(_):_),histogram):threshold},histogram}},"../../.yarn/cache/d3-array-npm-3.2.2-f6016b3101-98af3db792.zip/node_modules/d3-array/src/max.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function max(values,valueof){let max;if(void 0===valueof)for(const value of values)null!=value&&(max<value||void 0===max&&value>=value)&&(max=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value)}return max}__webpack_require__.d(__webpack_exports__,{Z:()=>max})},"../../.yarn/cache/d3-axis-npm-3.0.0-81ef16a9a5-227ddaa6d4.zip/node_modules/d3-axis/src/axis.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function identity(x){return x}__webpack_require__.d(__webpack_exports__,{LL:()=>axisBottom,y4:()=>axisLeft});function translateX(x){return"translate("+x+",0)"}function translateY(y){return"translate(0,"+y+")"}function number(scale){return d=>+scale(d)}function center(scale,offset){return offset=Math.max(0,scale.bandwidth()-2*offset)/2,scale.round()&&(offset=Math.round(offset)),d=>+scale(d)+offset}function entering(){return!this.__axis}function axis(orient,scale){var tickArguments=[],tickValues=null,tickFormat=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,offset="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,k=1===orient||4===orient?-1:1,x=4===orient||2===orient?"x":"y",transform=1===orient||3===orient?translateX:translateY;function axis(context){var values=null==tickValues?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=null==tickFormat?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):identity:tickFormat,spacing=Math.max(tickSizeInner,0)+tickPadding,range=scale.range(),range0=+range[0]+offset,range1=+range[range.length-1]+offset,position=(scale.bandwidth?center:number)(scale.copy(),offset),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line=tick.select("line"),text=tick.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),tick=tick.merge(tickEnter),line=line.merge(tickEnter.append("line").attr("stroke","currentColor").attr(x+"2",k*tickSizeInner)),text=text.merge(tickEnter.append("text").attr("fill","currentColor").attr(x,k*spacing).attr("dy",1===orient?"0em":3===orient?"0.71em":"0.32em")),context!==selection&&(path=path.transition(context),tick=tick.transition(context),line=line.transition(context),text=text.transition(context),tickExit=tickExit.transition(context).attr("opacity",1e-6).attr("transform",(function(d){return isFinite(d=position(d))?transform(d+offset):this.getAttribute("transform")})),tickEnter.attr("opacity",1e-6).attr("transform",(function(d){var p=this.parentNode.__axis;return transform((p&&isFinite(p=p(d))?p:position(d))+offset)}))),tickExit.remove(),path.attr("d",4===orient||2===orient?tickSizeOuter?"M"+k*tickSizeOuter+","+range0+"H"+offset+"V"+range1+"H"+k*tickSizeOuter:"M"+offset+","+range0+"V"+range1:tickSizeOuter?"M"+range0+","+k*tickSizeOuter+"V"+offset+"H"+range1+"V"+k*tickSizeOuter:"M"+range0+","+offset+"H"+range1),tick.attr("opacity",1).attr("transform",(function(d){return transform(position(d)+offset)})),line.attr(x+"2",k*tickSizeInner),text.attr(x,k*spacing).text(format),selection.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===orient?"start":4===orient?"end":"middle"),selection.each((function(){this.__axis=position}))}return axis.scale=function(_){return arguments.length?(scale=_,axis):scale},axis.ticks=function(){return tickArguments=Array.from(arguments),axis},axis.tickArguments=function(_){return arguments.length?(tickArguments=null==_?[]:Array.from(_),axis):tickArguments.slice()},axis.tickValues=function(_){return arguments.length?(tickValues=null==_?null:Array.from(_),axis):tickValues&&tickValues.slice()},axis.tickFormat=function(_){return arguments.length?(tickFormat=_,axis):tickFormat},axis.tickSize=function(_){return arguments.length?(tickSizeInner=tickSizeOuter=+_,axis):tickSizeInner},axis.tickSizeInner=function(_){return arguments.length?(tickSizeInner=+_,axis):tickSizeInner},axis.tickSizeOuter=function(_){return arguments.length?(tickSizeOuter=+_,axis):tickSizeOuter},axis.tickPadding=function(_){return arguments.length?(tickPadding=+_,axis):tickPadding},axis.offset=function(_){return arguments.length?(offset=+_,axis):offset},axis}function axisBottom(scale){return axis(3,scale)}function axisLeft(scale){return axis(4,scale)}},"../../.yarn/cache/d3-brush-npm-3.0.0-0f86c8ad35-1d04216776.zip/node_modules/d3-brush/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Yu:()=>brushX});var noop={value:()=>{}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name}}))}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=parseTypenames(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};const src_dispatch=dispatch;var src_select=__webpack_require__("../../.yarn/cache/d3-selection-npm-3.0.0-39a42b4ca9-f4e60e1333.zip/node_modules/d3-selection/src/select.js");const nonpassivecapture={capture:!0,passive:!1};function noevent(event){event.preventDefault(),event.stopImmediatePropagation()}function nodrag(view){var root=view.document.documentElement,selection=(0,src_select.Z)(view).on("dragstart.drag",noevent,nonpassivecapture);"onselectstart"in root?selection.on("selectstart.drag",noevent,nonpassivecapture):(root.__noselect=root.style.MozUserSelect,root.style.MozUserSelect="none")}function yesdrag(view,noclick){var root=view.document.documentElement,selection=(0,src_select.Z)(view).on("dragstart.drag",null);noclick&&(selection.on("click.drag",noevent,nonpassivecapture),setTimeout((function(){selection.on("click.drag",null)}),0)),"onselectstart"in root?selection.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,delete root.__noselect)}var value=__webpack_require__("../../.yarn/cache/d3-interpolate-npm-3.0.1-77ddca7977-a42ba314e2.zip/node_modules/d3-interpolate/src/value.js");function pointer(event,node){if(event=function sourceEvent(event){let sourceEvent;for(;sourceEvent=event.sourceEvent;)event=sourceEvent;return event}(event),void 0===node&&(node=event.currentTarget),node){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}if(node.getBoundingClientRect){var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}}return[event.pageX,event.pageY]}var taskHead,taskTail,selection=__webpack_require__("../../.yarn/cache/d3-selection-npm-3.0.0-39a42b4ca9-f4e60e1333.zip/node_modules/d3-selection/src/selection/index.js"),timer_frame=0,timeout=0,interval=0,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function wake(){clockNow=(clockLast=clock.now())+clockSkew,timer_frame=timeout=0;try{!function timerFlush(){now(),++timer_frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--timer_frame}()}finally{timer_frame=0,function nap(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>1e3&&(clockSkew-=delay,clockLast=now)}function sleep(time){timer_frame||(timeout&&(timeout=clearTimeout(timeout)),time-clockNow>24?(time<1/0&&(timeout=setTimeout(wake,time-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,1e3)),timer_frame=1,setFrame(wake)))}function src_timeout(callback,delay,time){var t=new Timer;return delay=null==delay?0:+delay,t.restart((elapsed=>{t.stop(),callback(elapsed+delay)}),delay,time),t}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=src_dispatch("start","end","cancel","interrupt"),emptyTween=[];function schedule(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=1,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(1!==self.state)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(3===o.state)return src_timeout(start);4===o.state?(o.state=6,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=6,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(src_timeout((function(){3===self.state&&(self.state=4,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=2,self.on.call("start",node,node.__data__,self.index,self.group),2===self.state){for(self.state=3,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=5,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);5===self.state&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=6,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer(schedule,0,self.time)}(node,id,{name,index,group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:0})}function init(node,id){var schedule=schedule_get(node,id);if(schedule.state>0)throw new Error("too late; already scheduled");return schedule}function schedule_set(node,id){var schedule=schedule_get(node,id);if(schedule.state>3)throw new Error("too late; already running");return schedule}function schedule_get(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function interrupt(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>2&&schedule.state<5,schedule.state=6,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}var svgNode,number=__webpack_require__("../../.yarn/cache/d3-interpolate-npm-3.0.1-77ddca7977-a42ba314e2.zip/node_modules/d3-interpolate/src/number.js"),degrees=180/Math.PI,identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX,scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:(0,number.Z)(xa,xb)},{i:i-2,x:(0,number.Z)(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:(0,number.Z)(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:(0,number.Z)(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:(0,number.Z)(xa,xb)},{i:i-2,x:(0,number.Z)(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform((function parseCss(value){const m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?identity:decompose(m.a,m.b,m.c,m.d,m.e,m.f)}),"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform((function parseSvg(value){return null==value?identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?decompose((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):identity)}),", ",")",")"),namespace=__webpack_require__("../../.yarn/cache/d3-selection-npm-3.0.0-39a42b4ca9-f4e60e1333.zip/node_modules/d3-selection/src/namespace.js");function tweenRemove(id,name){var tween0,tween1;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name,value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue(transition,name,value){var id=transition._id;return transition.each((function(){var schedule=schedule_set(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)})),function(node){return schedule_get(node,id).value[name]}}var color=__webpack_require__("../../.yarn/cache/d3-color-npm-3.1.0-fc73fe3b15-4931fbfda5.zip/node_modules/d3-color/src/color.js"),rgb=__webpack_require__("../../.yarn/cache/d3-interpolate-npm-3.0.1-77ddca7977-a42ba314e2.zip/node_modules/d3-interpolate/src/rgb.js"),string=__webpack_require__("../../.yarn/cache/d3-interpolate-npm-3.0.1-77ddca7977-a42ba314e2.zip/node_modules/d3-interpolate/src/string.js");function interpolate(a,b){var c;return("number"==typeof b?number.Z:b instanceof color.ZP?rgb.ZP:(c=(0,color.ZP)(b))?(b=c,rgb.ZP):string.Z)(a,b)}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrConstantNS(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attrFunctionNS(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrInterpolate(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}function attrInterpolateNS(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolateNS(fullname,i)),t0}return tween._value=value,tween}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolate(name,i)),t0}return tween._value=value,tween}function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){init(this,id).delay=value}}function durationFunction(id,value){return function(){schedule_set(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){schedule_set(this,id).duration=value}}function easeConstant(id,value){if("function"!=typeof value)throw new Error;return function(){schedule_set(this,id).ease=value}}var matcher=__webpack_require__("../../.yarn/cache/d3-selection-npm-3.0.0-39a42b4ca9-f4e60e1333.zip/node_modules/d3-selection/src/matcher.js");function onFunction(id,name,listener){var on0,on1,sit=function start(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?init:schedule_set;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}var selector=__webpack_require__("../../.yarn/cache/d3-selection-npm-3.0.0-39a42b4ca9-f4e60e1333.zip/node_modules/d3-selection/src/selector.js");var selectorAll=__webpack_require__("../../.yarn/cache/d3-selection-npm-3.0.0-39a42b4ca9-f4e60e1333.zip/node_modules/d3-selection/src/selectorAll.js");var Selection=selection.ZP.prototype.constructor;var style=__webpack_require__("../../.yarn/cache/d3-selection-npm-3.0.0-39a42b4ca9-f4e60e1333.zip/node_modules/d3-selection/src/selection/style.js");function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleInterpolate(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&styleInterpolate(name,i,priority)),t}return tween._value=value,tween}function textInterpolate(i){return function(t){this.textContent=i.call(this,t)}}function textTween(value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&textInterpolate(i)),t0}return tween._value=value,tween}var id=0;function Transition(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function newId(){return++id}var selection_prototype=selection.ZP.prototype;Transition.prototype=function transition_transition(name){return(0,selection.ZP)().transition(name)}.prototype={constructor:Transition,select:function transition_select(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=(0,selector.Z)(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule(subgroup[i],name,id,i,subgroup,schedule_get(node,id)));return new Transition(subgroups,this._parents,name,id)},selectAll:function selectAll(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=(0,selectorAll.Z)(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=schedule_get(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition(subgroups,parents,name,id)},selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:function filter(match){"function"!=typeof match&&(match=(0,matcher.Z)(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition(subgroups,this._parents,this._name,this._id)},merge:function merge(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition(merges,this._parents,this._name,this._id)},selection:function transition_selection(){return new Selection(this._groups,this._parents)},transition:function transition(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=schedule_get(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition(groups,this._parents,name,id1)},call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:function on(name,listener){var id=this._id;return arguments.length<2?schedule_get(this.node(),id).on.on(name):this.each(onFunction(id,name,listener))},attr:function attr(name,value){var fullname=(0,namespace.Z)(name),i="transform"===fullname?interpolateTransformSvg:interpolate;return this.attrTween(name,"function"==typeof value?(fullname.local?attrFunctionNS:attrFunction)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attrRemoveNS:attrRemove)(fullname):(fullname.local?attrConstantNS:attrConstant)(fullname,i,value))},attrTween:function transition_attrTween(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=(0,namespace.Z)(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))},style:function transition_style(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss:interpolate;return null==value?this.styleTween(name,function styleNull(name,interpolate){var string00,string10,interpolate0;return function(){var string0=(0,style.S)(this,name),string1=(this.style.removeProperty(name),(0,style.S)(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,styleRemove(name)):"function"==typeof value?this.styleTween(name,function styleFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=(0,style.S)(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=(0,style.S)(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue(this,"style."+name,value))).each(function styleMaybeRemove(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=schedule_set(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=styleRemove(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function styleConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=(0,style.S)(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function transition_styleTween(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,styleTween(name,value,null==priority?"":priority))},text:function transition_text(value){return this.tween("text","function"==typeof value?function textFunction(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue(this,"text",value)):function textConstant(value){return function(){this.textContent=value}}(null==value?"":value+""))},textTween:function transition_textTween(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,textTween(value))},remove:function remove(){return this.on("end.remove",function removeFunction(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function tween(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=schedule_get(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value))},delay:function delay(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):schedule_get(this.node(),id).delay},duration:function duration(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):schedule_get(this.node(),id).duration},ease:function ease(value){var id=this._id;return arguments.length?this.each(easeConstant(id,value)):schedule_get(this.node(),id).ease},easeVarying:function transition_easeVarying(value){if("function"!=typeof value)throw new Error;return this.each(function easeVarying(id,value){return function(){var v=value.apply(this,arguments);if("function"!=typeof v)throw new Error;schedule_set(this,id).ease=v}}(this._id,value))},end:function end(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise((function(resolve,reject){var cancel={value:reject},end={value:function(){0==--size&&resolve()}};that.each((function(){var schedule=schedule_set(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1})),0===size&&resolve()}))},[Symbol.iterator]:selection_prototype[Symbol.iterator]};var defaultTiming={time:null,delay:0,duration:250,ease:function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))throw new Error(`transition ${id} not found`);return timing}selection.ZP.prototype.interrupt=function selection_interrupt(name){return this.each((function(){interrupt(this,name)}))},selection.ZP.prototype.transition=function selection_transition(name){var id,timing;name instanceof Transition?(id=name._id,name=name._name):(id=newId(),(timing=defaultTiming).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule(node,name,id,i,group,timing||inherit(node,id));return new Transition(groups,this._parents,name,id)};const constant=x=>()=>x;function BrushEvent(type,{sourceEvent,target,selection,mode,dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},selection:{value:selection,enumerable:!0,configurable:!0},mode:{value:mode,enumerable:!0,configurable:!0},_:{value:dispatch}})}function noevent_nopropagation(event){event.stopImmediatePropagation()}function src_noevent(event){event.preventDefault(),event.stopImmediatePropagation()}var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};const{abs,max,min}=Math;function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}var X={name:"x",handles:["w","e"].map(type),input:function(x,e){return null==x?null:[[+x[0],e[0][1]],[+x[1],e[1][1]]]},output:function(xy){return xy&&[xy[0][0],xy[1][0]]}},Y={name:"y",handles:["n","s"].map(type),input:function(y,e){return null==y?null:[[e[0][0],+y[0]],[e[1][0],+y[1]]]},output:function(xy){return xy&&[xy[0][1],xy[1][1]]}},cursors=(["n","w","e","s","nw","ne","sw","se"].map(type),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type(t){return{type:t}}function defaultFilter(event){return!event.ctrlKey&&!event.button}function defaultExtent(){var svg=this.ownerSVGElement||this;return svg.hasAttribute("viewBox")?[[(svg=svg.viewBox.baseVal).x,svg.y],[svg.x+svg.width,svg.y+svg.height]]:[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]]}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(node){for(;!node.__brush;)if(!(node=node.parentNode))return;return node.__brush}function empty(extent){return extent[0][0]===extent[1][0]||extent[0][1]===extent[1][1]}function brushX(){return brush_brush(X)}function brush_brush(dim){var touchending,extent=defaultExtent,filter=defaultFilter,touchable=defaultTouchable,keys=!0,listeners=src_dispatch("start","brush","end"),handleSize=6;function brush(group){var overlay=group.property("__brush",initialize).selectAll(".overlay").data([type("overlay")]);overlay.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(overlay).each((function(){var extent=local(this).extent;(0,src_select.Z)(this).attr("x",extent[0][0]).attr("y",extent[0][1]).attr("width",extent[1][0]-extent[0][0]).attr("height",extent[1][1]-extent[0][1])})),group.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var handle=group.selectAll(".handle").data(dim.handles,(function(d){return d.type}));handle.exit().remove(),handle.enter().append("rect").attr("class",(function(d){return"handle handle--"+d.type})).attr("cursor",(function(d){return cursors[d.type]})),group.each(redraw).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",started).filter(touchable).on("touchstart.brush",started).on("touchmove.brush",touchmoved).on("touchend.brush touchcancel.brush",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function redraw(){var group=(0,src_select.Z)(this),selection=local(this).selection;selection?(group.selectAll(".selection").style("display",null).attr("x",selection[0][0]).attr("y",selection[0][1]).attr("width",selection[1][0]-selection[0][0]).attr("height",selection[1][1]-selection[0][1]),group.selectAll(".handle").style("display",null).attr("x",(function(d){return"e"===d.type[d.type.length-1]?selection[1][0]-handleSize/2:selection[0][0]-handleSize/2})).attr("y",(function(d){return"s"===d.type[0]?selection[1][1]-handleSize/2:selection[0][1]-handleSize/2})).attr("width",(function(d){return"n"===d.type||"s"===d.type?selection[1][0]-selection[0][0]+handleSize:handleSize})).attr("height",(function(d){return"e"===d.type||"w"===d.type?selection[1][1]-selection[0][1]+handleSize:handleSize}))):group.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function emitter(that,args,clean){var emit=that.__brush.emitter;return!emit||clean&&emit.clean?new Emitter(that,args,clean):emit}function Emitter(that,args,clean){this.that=that,this.args=args,this.state=that.__brush,this.active=0,this.clean=clean}function started(event){if((!touchending||event.touches)&&filter.apply(this,arguments)){var w0,w1,n0,n1,e0,e1,s0,s1,moving,lockX,lockY,that=this,type=event.target.__data__.type,mode="selection"===(keys&&event.metaKey?type="overlay":type)?MODE_DRAG:keys&&event.altKey?MODE_CENTER:MODE_HANDLE,signX=dim===Y?null:signsX[type],signY=dim===X?null:signsY[type],state=local(that),extent=state.extent,selection=state.selection,W=extent[0][0],N=extent[0][1],E=extent[1][0],S=extent[1][1],dx=0,dy=0,shifting=signX&&signY&&keys&&event.shiftKey,points=Array.from(event.touches||[event],(t=>{const i=t.identifier;return(t=pointer(t,that)).point0=t.slice(),t.identifier=i,t}));interrupt(that);var emit=emitter(that,arguments,!0).beforestart();if("overlay"===type){selection&&(moving=!0);const pts=[points[0],points[1]||points[0]];state.selection=selection=[[w0=dim===Y?W:min(pts[0][0],pts[1][0]),n0=dim===X?N:min(pts[0][1],pts[1][1])],[e0=dim===Y?E:max(pts[0][0],pts[1][0]),s0=dim===X?S:max(pts[0][1],pts[1][1])]],points.length>1&&move(event)}else w0=selection[0][0],n0=selection[0][1],e0=selection[1][0],s0=selection[1][1];w1=w0,n1=n0,e1=e0,s1=s0;var group=(0,src_select.Z)(that).attr("pointer-events","none"),overlay=group.selectAll(".overlay").attr("cursor",cursors[type]);if(event.touches)emit.moved=moved,emit.ended=ended;else{var view=(0,src_select.Z)(event.view).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0);keys&&view.on("keydown.brush",keydowned,!0).on("keyup.brush",keyupped,!0),nodrag(event.view)}redraw.call(that),emit.start(event,mode.name)}function moved(event){for(const p of event.changedTouches||[event])for(const d of points)d.identifier===p.identifier&&(d.cur=pointer(p,that));if(shifting&&!lockX&&!lockY&&1===points.length){const point=points[0];abs(point.cur[0]-point[0])>abs(point.cur[1]-point[1])?lockY=!0:lockX=!0}for(const point of points)point.cur&&(point[0]=point.cur[0],point[1]=point.cur[1]);moving=!0,src_noevent(event),move(event)}function move(event){const point=points[0],point0=point.point0;var t;switch(dx=point[0]-point0[0],dy=point[1]-point0[1],mode){case MODE_SPACE:case MODE_DRAG:signX&&(dx=max(W-w0,min(E-e0,dx)),w1=w0+dx,e1=e0+dx),signY&&(dy=max(N-n0,min(S-s0,dy)),n1=n0+dy,s1=s0+dy);break;case MODE_HANDLE:points[1]?(signX&&(w1=max(W,min(E,points[0][0])),e1=max(W,min(E,points[1][0])),signX=1),signY&&(n1=max(N,min(S,points[0][1])),s1=max(N,min(S,points[1][1])),signY=1)):(signX<0?(dx=max(W-w0,min(E-w0,dx)),w1=w0+dx,e1=e0):signX>0&&(dx=max(W-e0,min(E-e0,dx)),w1=w0,e1=e0+dx),signY<0?(dy=max(N-n0,min(S-n0,dy)),n1=n0+dy,s1=s0):signY>0&&(dy=max(N-s0,min(S-s0,dy)),n1=n0,s1=s0+dy));break;case MODE_CENTER:signX&&(w1=max(W,min(E,w0-dx*signX)),e1=max(W,min(E,e0+dx*signX))),signY&&(n1=max(N,min(S,n0-dy*signY)),s1=max(N,min(S,s0+dy*signY)))}e1<w1&&(signX*=-1,t=w0,w0=e0,e0=t,t=w1,w1=e1,e1=t,type in flipX&&overlay.attr("cursor",cursors[type=flipX[type]])),s1<n1&&(signY*=-1,t=n0,n0=s0,s0=t,t=n1,n1=s1,s1=t,type in flipY&&overlay.attr("cursor",cursors[type=flipY[type]])),state.selection&&(selection=state.selection),lockX&&(w1=selection[0][0],e1=selection[1][0]),lockY&&(n1=selection[0][1],s1=selection[1][1]),selection[0][0]===w1&&selection[0][1]===n1&&selection[1][0]===e1&&selection[1][1]===s1||(state.selection=[[w1,n1],[e1,s1]],redraw.call(that),emit.brush(event,mode.name))}function ended(event){if(noevent_nopropagation(event),event.touches){if(event.touches.length)return;touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500)}else yesdrag(event.view,moving),view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);group.attr("pointer-events","all"),overlay.attr("cursor",cursors.overlay),state.selection&&(selection=state.selection),empty(selection)&&(state.selection=null,redraw.call(that)),emit.end(event,mode.name)}function keydowned(event){switch(event.keyCode){case 16:shifting=signX&&signY;break;case 18:mode===MODE_HANDLE&&(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER,move(event));break;case 32:mode!==MODE_HANDLE&&mode!==MODE_CENTER||(signX<0?e0=e1-dx:signX>0&&(w0=w1-dx),signY<0?s0=s1-dy:signY>0&&(n0=n1-dy),mode=MODE_SPACE,overlay.attr("cursor",cursors.selection),move(event));break;default:return}src_noevent(event)}function keyupped(event){switch(event.keyCode){case 16:shifting&&(lockX=lockY=shifting=!1,move(event));break;case 18:mode===MODE_CENTER&&(signX<0?e0=e1:signX>0&&(w0=w1),signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE,move(event));break;case 32:mode===MODE_SPACE&&(event.altKey?(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER):(signX<0?e0=e1:signX>0&&(w0=w1),signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE),overlay.attr("cursor",cursors[type]),move(event));break;default:return}src_noevent(event)}}function touchmoved(event){emitter(this,arguments).moved(event)}function touchended(event){emitter(this,arguments).ended(event)}function initialize(){var state=this.__brush||{selection:null};return state.extent=number2(extent.apply(this,arguments)),state.dim=dim,state}return brush.move=function(group,selection,event){group.tween?group.on("start.brush",(function(event){emitter(this,arguments).beforestart().start(event)})).on("interrupt.brush end.brush",(function(event){emitter(this,arguments).end(event)})).tween("brush",(function(){var that=this,state=that.__brush,emit=emitter(that,arguments),selection0=state.selection,selection1=dim.input("function"==typeof selection?selection.apply(this,arguments):selection,state.extent),i=(0,value.Z)(selection0,selection1);function tween(t){state.selection=1===t&&null===selection1?null:i(t),redraw.call(that),emit.brush()}return null!==selection0&&null!==selection1?tween:tween(1)})):group.each((function(){var that=this,args=arguments,state=that.__brush,selection1=dim.input("function"==typeof selection?selection.apply(that,args):selection,state.extent),emit=emitter(that,args).beforestart();interrupt(that),state.selection=null===selection1?null:selection1,redraw.call(that),emit.start(event).brush(event).end(event)}))},brush.clear=function(group,event){brush.move(group,null,event)},Emitter.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(event,mode){return this.starting?(this.starting=!1,this.emit("start",event,mode)):this.emit("brush",event),this},brush:function(event,mode){return this.emit("brush",event,mode),this},end:function(event,mode){return 0==--this.active&&(delete this.state.emitter,this.emit("end",event,mode)),this},emit:function(type,event,mode){var d=(0,src_select.Z)(this.that).datum();listeners.call(type,this.that,new BrushEvent(type,{sourceEvent:event,target:brush,selection:dim.output(this.state.selection),mode,dispatch:listeners}),d)}},brush.extent=function(_){return arguments.length?(extent="function"==typeof _?_:constant(number2(_)),brush):extent},brush.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant(!!_),brush):filter},brush.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:constant(!!_),brush):touchable},brush.handleSize=function(_){return arguments.length?(handleSize=+_,brush):handleSize},brush.keyModifiers=function(_){return arguments.length?(keys=!!_,brush):keys},brush.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?brush:value},brush}}}]);